{"modules":[{"id":"566be61f-1499-4d9e-aba8-1cbc76902223","type":"PlayPrompt","branches":[{"condition":"Success","transition":"55c0c02e-ce0e-4e8e-9bf8-f9f8617b60f2"}],"parameters":[{"name":"Text","value":"Call secured.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1104,"y":27},"useDynamic":false}},{"id":"55c0c02e-ce0e-4e8e-9bf8-f9f8617b60f2","type":"Transfer","branches":[{"condition":"AtCapacity","transition":"a4750ac6-13de-48e6-b346-f2012ce979a5"},{"condition":"Error","transition":"a4750ac6-13de-48e6-b346-f2012ce979a5"}],"parameters":[],"metadata":{"position":{"x":1358,"y":184},"useDynamic":false,"queue":null},"target":"Queue"},{"id":"70cd87e0-b784-489a-ab07-f7d37e536fb9","type":"SetQueue","branches":[{"condition":"Success","transition":"566be61f-1499-4d9e-aba8-1cbc76902223"},{"condition":"Error","transition":"a4750ac6-13de-48e6-b346-f2012ce979a5"}],"parameters":[{"name":"Agent","value":"AgentName","namespace":"External","resourceName":null}],"metadata":{"position":{"x":870,"y":20},"useDynamic":true,"queue":"AgentName"}},{"id":"c92e6a1b-1d30-4b06-983c-fd0b74fa8144","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":1138,"y":771}}},{"id":"df692fde-edbc-41c8-ab3a-a6cfd0f03c19","type":"PlayPrompt","branches":[{"condition":"Success","transition":"c92e6a1b-1d30-4b06-983c-fd0b74fa8144"}],"parameters":[{"name":"Text","value":"incoming call from P C I Pal - error invoking lambda function","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":699,"y":654},"useDynamic":false}},{"id":"de7d53a1-35e6-4078-927b-9703c84872e9","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"70cd87e0-b784-489a-ab07-f7d37e536fb9"},{"condition":"Error","transition":"df692fde-edbc-41c8-ab3a-a6cfd0f03c19"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:eu-west-2:854203033348:function:amplify-webapp-pcipal-161225-GetAgent-GBWVCI9D80V7","namespace":null},{"name":"TimeLimit","value":"8"},{"name":"Parameter","key":"PIN","value":"Stored customer input","namespace":"System"}],"metadata":{"position":{"x":563,"y":18},"dynamicMetadata":{"PIN":true},"useDynamic":false},"target":"Lambda"},{"id":"a4750ac6-13de-48e6-b346-f2012ce979a5","type":"PlayPrompt","branches":[{"condition":"Success","transition":"c92e6a1b-1d30-4b06-983c-fd0b74fa8144"}],"parameters":[{"name":"Text","value":"incoming call from P C I Pal - an error has occurred","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1140,"y":433},"useDynamic":false}},{"id":"a9ffd712-23cc-43b3-a0ba-08a920d9090b","type":"SetLoggingBehavior","branches":[{"condition":"Success","transition":"3ee8ed98-03a4-4b5b-85d6-a5c004ff0441"}],"parameters":[{"name":"LoggingBehavior","value":"Enable"}],"metadata":{"position":{"x":200.06666672229767,"y":40}}},{"id":"3ee8ed98-03a4-4b5b-85d6-a5c004ff0441","type":"StoreUserInput","branches":[{"condition":"Success","transition":"de7d53a1-35e6-4078-927b-9703c84872e9"},{"condition":"Error","transition":"a4750ac6-13de-48e6-b346-f2012ce979a5"}],"parameters":[{"name":"Text","value":"reading agent locator","namespace":null},{"name":"TextToSpeechType","value":"text"},{"name":"CustomerInputType","value":"Custom"},{"name":"Timeout","value":"50"},{"name":"MaxDigits","value":4},{"name":"EncryptEntry","value":false},{"name":"DisableCancel","value":false}],"metadata":{"position":{"x":316,"y":238},"useDynamic":false,"useDynamicForEncryptionKeys":true,"useDynamicForTerminatorDigits":false,"countryCodePrefix":"+1"}}],"version":"1","type":"contactFlow","start":"a9ffd712-23cc-43b3-a0ba-08a920d9090b","metadata":{"entryPointPosition":{"x":15,"y":17.866666555404663},"snapToGrid":false,"name":"PCI Pal - accept call from PCI Pal and deliver to the same agent","description":"Accept call from PCI Pal and deliver to the same agent by calling a lambda function after reading the incoming DTMF from the other leg","type":"contactFlow","status":"published","hash":"26052d4b07afc845040bab155662c52ff7b730006e8ecc5935bcb79db3d13d53"}}