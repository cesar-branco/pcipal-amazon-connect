{"modules":[{"id":"66f6464e-0724-4f43-a7f2-e88c9a382b60","type":"SetLoggingBehavior","branches":[{"condition":"Success","transition":"e5b10788-7af4-4213-9acd-10db03963dda"}],"parameters":[{"name":"LoggingBehavior","value":"Enable"}],"metadata":{"position":{"x":82,"y":182}}},{"id":"dac112a8-0336-45ff-b0c1-d228d7dd1a3d","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":1389,"y":682}}},{"id":"82b2eccd-f886-4dd5-84ea-2a79a9b66b32","type":"Transfer","branches":[{"condition":"Success","transition":"dac112a8-0336-45ff-b0c1-d228d7dd1a3d"},{"condition":"CallFailure","transition":"2c28faf6-033f-4126-84e3-6801a517787e"},{"condition":"Timeout","transition":"2c28faf6-033f-4126-84e3-6801a517787e"},{"condition":"Error","transition":"2c28faf6-033f-4126-84e3-6801a517787e"}],"parameters":[{"name":"TimeLimit","value":"30"},{"name":"BlindTransfer","value":false},{"name":"DtmfValue","value":"delay_and_PIN","namespace":"User Defined"},{"name":"PhoneNumber","value":"+441547317068"}],"metadata":{"position":{"x":841,"y":29},"CountryCode":"gb"},"target":"PhoneNumber"},{"id":"2c28faf6-033f-4126-84e3-6801a517787e","type":"PlayPrompt","branches":[{"condition":"Success","transition":"dac112a8-0336-45ff-b0c1-d228d7dd1a3d"}],"parameters":[{"name":"Text","value":"error transferring call to P C I Pal number","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1145,"y":432},"useDynamic":false}},{"id":"3f78f9ea-d9b6-48cb-94b0-524faad7eab1","type":"SetAttributes","branches":[{"condition":"Success","transition":"82b2eccd-f886-4dd5-84ea-2a79a9b66b32"},{"condition":"Error","transition":"2c28faf6-033f-4126-84e3-6801a517787e"}],"parameters":[{"name":"Attribute","value":"+442035140911","key":"calling_number","namespace":null},{"name":"Attribute","value":",,,,,,,$.External.PIN","key":"delay_and_PIN","namespace":null}],"metadata":{"position":{"x":573,"y":54}}},{"id":"190fb2dd-35a9-41ec-bde9-ece3878130d8","type":"PlayPrompt","branches":[{"condition":"Success","transition":"dac112a8-0336-45ff-b0c1-d228d7dd1a3d"}],"parameters":[{"name":"Text","value":"error invoking lambda function","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1116,"y":757},"useDynamic":false}},{"id":"e5b10788-7af4-4213-9acd-10db03963dda","type":"PlayPrompt","branches":[{"condition":"Success","transition":"bed8e346-de6c-48a7-941d-9f89b5aee97a"}],"parameters":[{"name":"Text","value":"Securing call...","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":306,"y":35},"useDynamic":false}},{"id":"bed8e346-de6c-48a7-941d-9f89b5aee97a","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"3f78f9ea-d9b6-48cb-94b0-524faad7eab1"},{"condition":"Error","transition":"190fb2dd-35a9-41ec-bde9-ece3878130d8"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:eu-west-2:854203033348:function:amplify-webapp-pcipal-161225-AddAgent-1UDR1GIOCB4RS","namespace":null},{"name":"TimeLimit","value":"8"},{"name":"Parameter","key":"AgentName","value":"QueueAgentName","namespace":"User Defined"}],"metadata":{"position":{"x":298,"y":465},"dynamicMetadata":{"AgentName":true},"useDynamic":false},"target":"Lambda"}],"version":"1","type":"queueTransfer","start":"66f6464e-0724-4f43-a7f2-e88c9a382b60","metadata":{"entryPointPosition":{"x":15,"y":37},"snapToGrid":false,"name":"PCI Pal - transfers call to PCI Pal to be secured after saving agent name","description":"Loop Transfer to PCI Pal saving the agent name with a lambda function that returns a PIN than will be used to find the same agent as the call returns to amazon connect.","type":"queueTransfer","status":"published","hash":"7b4f42f1ee3caf0a5d8673a07cde198baf1e755f07ba881b66a14509abe235af"}}