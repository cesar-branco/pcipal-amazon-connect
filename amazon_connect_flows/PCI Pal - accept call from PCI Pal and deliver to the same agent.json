{"modules":[{"id":"a9ffd712-23cc-43b3-a0ba-08a920d9090b","type":"SetLoggingBehavior","branches":[{"condition":"Success","transition":"3ee8ed98-03a4-4b5b-85d6-a5c004ff0441"}],"parameters":[{"name":"LoggingBehavior","value":"Enable"}],"metadata":{"position":{"x":200.06666672229767,"y":37.13333344459534}}},{"id":"c92e6a1b-1d30-4b06-983c-fd0b74fa8144","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":1739,"y":806}}},{"id":"40cacbcd-426a-4519-9a28-a03d3cf7499a","type":"PlayPrompt","branches":[{"condition":"Success","transition":"c92e6a1b-1d30-4b06-983c-fd0b74fa8144"},{"condition":"Error","transition":"c92e6a1b-1d30-4b06-983c-fd0b74fa8144"}],"parameters":[{"name":"Text","value":"Error enqueuing call.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1711,"y":330},"useDynamic":false}},{"id":"df692fde-edbc-41c8-ab3a-a6cfd0f03c19","type":"PlayPrompt","branches":[{"condition":"Success","transition":"c92e6a1b-1d30-4b06-983c-fd0b74fa8144"}],"parameters":[{"name":"Text","value":"incoming call from P C I Pal - error invoking lambda function","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":699,"y":651.1333334445953},"useDynamic":false}},{"id":"3ee8ed98-03a4-4b5b-85d6-a5c004ff0441","type":"StoreUserInput","branches":[{"condition":"Success","transition":"de7d53a1-35e6-4078-927b-9703c84872e9"},{"condition":"Error","transition":"a4750ac6-13de-48e6-b346-f2012ce979a5"}],"parameters":[{"name":"Text","value":"securing call...","namespace":null},{"name":"TextToSpeechType","value":"text"},{"name":"CustomerInputType","value":"Custom"},{"name":"Timeout","value":"50"},{"name":"MaxDigits","value":4},{"name":"EncryptEntry","value":false},{"name":"DisableCancel","value":false}],"metadata":{"position":{"x":119,"y":350},"useDynamic":false,"useDynamicForEncryptionKeys":true,"useDynamicForTerminatorDigits":false,"countryCodePrefix":"+1"}},{"id":"55c0c02e-ce0e-4e8e-9bf8-f9f8617b60f2","type":"Transfer","branches":[{"condition":"AtCapacity","transition":"40cacbcd-426a-4519-9a28-a03d3cf7499a"},{"condition":"Error","transition":"40cacbcd-426a-4519-9a28-a03d3cf7499a"}],"parameters":[],"metadata":{"position":{"x":1228,"y":350},"useDynamic":false,"queue":null},"target":"Queue"},{"id":"70cd87e0-b784-489a-ab07-f7d37e536fb9","type":"SetQueue","branches":[{"condition":"Success","transition":"55c0c02e-ce0e-4e8e-9bf8-f9f8617b60f2"},{"condition":"Error","transition":"a4750ac6-13de-48e6-b346-f2012ce979a5"}],"parameters":[{"name":"Agent","value":"AgentName","namespace":"External","resourceName":null}],"metadata":{"position":{"x":1257,"y":30},"useDynamic":true,"queue":"AgentName"}},{"id":"a4750ac6-13de-48e6-b346-f2012ce979a5","type":"PlayPrompt","branches":[{"condition":"Success","transition":"c92e6a1b-1d30-4b06-983c-fd0b74fa8144"}],"parameters":[{"name":"Text","value":"incoming call from P C I Pal - an error has occurred","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1193,"y":577},"useDynamic":false}},{"id":"de7d53a1-35e6-4078-927b-9703c84872e9","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"22c686ac-aee2-4904-bffa-9d637b008f45"},{"condition":"Error","transition":"df692fde-edbc-41c8-ab3a-a6cfd0f03c19"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:eu-west-2:854203033348:function:amplify-webapp-pcipal-161225-GetAgent-mQ3JcXcigObG","namespace":null},{"name":"TimeLimit","value":"8"},{"name":"Parameter","key":"PIN","value":"Stored customer input","namespace":"System"}],"metadata":{"position":{"x":563,"y":15.133333444595337},"dynamicMetadata":{"PIN":true},"useDynamic":false},"target":"Lambda"},{"id":"22c686ac-aee2-4904-bffa-9d637b008f45","type":"SetAttributes","branches":[{"condition":"Success","transition":"70cd87e0-b784-489a-ab07-f7d37e536fb9"},{"condition":"Error","transition":"a4750ac6-13de-48e6-b346-f2012ce979a5"}],"parameters":[{"name":"Attribute","value":"true","key":"secureCall","namespace":null},{"name":"Attribute","value":"euwest1","key":"region","namespace":null},{"name":"Attribute","value":"pcipaldev","key":"platform","namespace":null},{"name":"Attribute","value":"38","key":"flowId","namespace":null},{"name":"Attribute","value":"1","key":"tenantId","namespace":null},{"name":"Attribute","value":"Customer Number","key":"callingNumber","namespace":"System"},{"name":"Attribute","value":"Dialed Number","key":"calledNumber","namespace":"System"},{"name":"Attribute","value":"Value0","key":"Value0","namespace":"External"}],"metadata":{"position":{"x":804,"y":17},"dynamicParams":["callingNumber","calledNumber","Value0"]}}],"version":"1","start":"a9ffd712-23cc-43b3-a0ba-08a920d9090b","metadata":{"entryPointPosition":{"x":15,"y":15},"snapToGrid":false,"name":"PCI Pal - accept call from PCI Pal and deliver to the same agent","description":"Accept call from PCI Pal and deliver to the same agent by calling a lambda function after reading the incoming DTMF from the other leg","type":"contactFlow","status":"published","hash":"c537872c56e5426aba77574fd6bc6cd63926754f4d50548d99edfc6b02d2e046"},"type":"contactFlow"}