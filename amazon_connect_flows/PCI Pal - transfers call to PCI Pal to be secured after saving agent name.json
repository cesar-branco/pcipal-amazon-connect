{"modules":[{"id":"66f6464e-0724-4f43-a7f2-e88c9a382b60","type":"SetLoggingBehavior","branches":[{"condition":"Success","transition":"79b3da5b-660e-44a1-baf2-0fb48fd33c67"}],"parameters":[{"name":"LoggingBehavior","value":"Enable"}],"metadata":{"position":{"x":82,"y":182}}},{"id":"dac112a8-0336-45ff-b0c1-d228d7dd1a3d","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":1389,"y":682}}},{"id":"82b2eccd-f886-4dd5-84ea-2a79a9b66b32","type":"Transfer","branches":[{"condition":"Success","transition":"dac112a8-0336-45ff-b0c1-d228d7dd1a3d"},{"condition":"CallFailure","transition":"2c28faf6-033f-4126-84e3-6801a517787e"},{"condition":"Timeout","transition":"2c28faf6-033f-4126-84e3-6801a517787e"},{"condition":"Error","transition":"2c28faf6-033f-4126-84e3-6801a517787e"}],"parameters":[{"name":"TimeLimit","value":"30"},{"name":"BlindTransfer","value":false},{"name":"DtmfValue","value":"delay_and_PIN","namespace":"User Defined"},{"name":"PhoneNumber","value":"+441547317068"}],"metadata":{"position":{"x":987,"y":33},"CountryCode":"gb"},"target":"PhoneNumber"},{"id":"2c28faf6-033f-4126-84e3-6801a517787e","type":"PlayPrompt","branches":[{"condition":"Success","transition":"dac112a8-0336-45ff-b0c1-d228d7dd1a3d"}],"parameters":[{"name":"Text","value":"error transferring call to P C I Pal number","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1145,"y":432},"useDynamic":false}},{"id":"3f78f9ea-d9b6-48cb-94b0-524faad7eab1","type":"SetAttributes","branches":[{"condition":"Success","transition":"82b2eccd-f886-4dd5-84ea-2a79a9b66b32"},{"condition":"Error","transition":"2c28faf6-033f-4126-84e3-6801a517787e"}],"parameters":[{"name":"Attribute","value":"$.External.PIN","key":"delay_and_PIN","namespace":null},{"name":"Attribute","value":"false","key":"secureCall","namespace":null}],"metadata":{"position":{"x":573,"y":54},"dynamicParams":[]}},{"id":"190fb2dd-35a9-41ec-bde9-ece3878130d8","type":"PlayPrompt","branches":[{"condition":"Success","transition":"dac112a8-0336-45ff-b0c1-d228d7dd1a3d"}],"parameters":[{"name":"Text","value":"error invoking lambda function","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1116,"y":757},"useDynamic":false}},{"id":"79b3da5b-660e-44a1-baf2-0fb48fd33c67","type":"UpdateAgentState","branches":[{"condition":"Success","transition":"bed8e346-de6c-48a7-941d-9f89b5aee97a"},{"condition":"Error","transition":"190fb2dd-35a9-41ec-bde9-ece3878130d8"}],"parameters":[{"name":"AgentStatus","value":"ConferenceAll"}],"metadata":{"position":{"x":125,"y":578}}},{"id":"bed8e346-de6c-48a7-941d-9f89b5aee97a","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"3f78f9ea-d9b6-48cb-94b0-524faad7eab1"},{"condition":"Error","transition":"190fb2dd-35a9-41ec-bde9-ece3878130d8"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:eu-west-2:854203033348:function:amplify-webapp-pcipal-161225-AddAgent-2nRK6Gjg4LO3","namespace":null},{"name":"TimeLimit","value":"8"},{"name":"Parameter","key":"AgentName","value":"QueueAgentName","namespace":"User Defined"},{"name":"Parameter","key":"Value0","value":"some value","namespace":null},{"name":"Parameter","key":"Value1","value":"another value","namespace":null},{"name":"Parameter","key":"Value9","value":"and so on","namespace":null}],"metadata":{"position":{"x":330,"y":331},"dynamicMetadata":{"AgentName":true,"Value0":false,"Value1":false,"Value9":false},"useDynamic":false},"target":"Lambda"}],"version":"1","start":"66f6464e-0724-4f43-a7f2-e88c9a382b60","metadata":{"entryPointPosition":{"x":15,"y":37},"snapToGrid":false,"name":"PCI Pal - transfers call to PCI Pal to be secured after saving agent name","description":"Loop Transfer to PCI Pal saving the agent name with a lambda function that returns a PIN than will be used to find the same agent as the call returns to amazon connect.","type":"queueTransfer","status":"published","hash":"1b940ea693e90156ed273a557ff87f2f11f6346b5ed617d6967c98ec174f5473"},"type":"queueTransfer"}